/* This file has been autogenerated from generate-spy.ts.
 * Regenerate with "npm run generate-spy", DO NOT EDIT THIS FILE!
 */
import { match, SinonMatcher } from "sinon";
import { UnmockServiceSpy } from "..";
import { HTTPMethod } from "../../../interfaces";
import { decorateSpy, verifyOnlyOneCall } from "../decorate";

export interface ISpyDecoration {
  with(matcher: SinonMatcher): UnmockServiceSpy;
  withMethod(method: HTTPMethod): UnmockServiceSpy;
  postHost(matcher?: SinonMatcher): string;
  postRequestBody(matcher?: SinonMatcher): any;
  getHost(matcher?: SinonMatcher): string;
  getRequestBody(matcher?: SinonMatcher): any;
  putHost(matcher?: SinonMatcher): string;
  putRequestBody(matcher?: SinonMatcher): any;
  deleteHost(matcher?: SinonMatcher): string;
  deleteRequestBody(matcher?: SinonMatcher): any;
}

export const decorators = {
  with(this: UnmockServiceSpy, matcher: SinonMatcher): UnmockServiceSpy {
    return decorateSpy(this.withArgs(matcher));
  },
  withMethod(this: UnmockServiceSpy, method: HTTPMethod): UnmockServiceSpy {
    return this.with(match({ method }));
  },
  postHost(this: UnmockServiceSpy, matcher?: SinonMatcher): string {
    const methodMatcher = match({ method: "post" });
    const fullMatcher = matcher ? methodMatcher.and(matcher) : methodMatcher;
    const spyWithMatcher = this.with(fullMatcher);
    verifyOnlyOneCall({ spy: spyWithMatcher, errPrefix: "postHost" });
    return spyWithMatcher.firstCall.args[0].host;
  },
  postRequestBody(this: UnmockServiceSpy, matcher?: SinonMatcher): any {
    const methodMatcher = match({ method: "post" });
    const fullMatcher = matcher ? methodMatcher.and(matcher) : methodMatcher;
    const spyWithMatcher = this.with(fullMatcher);
    verifyOnlyOneCall({ spy: spyWithMatcher, errPrefix: "postRequestBody" });
    return spyWithMatcher.firstCall.args[0].body;
  },
  getHost(this: UnmockServiceSpy, matcher?: SinonMatcher): string {
    const methodMatcher = match({ method: "get" });
    const fullMatcher = matcher ? methodMatcher.and(matcher) : methodMatcher;
    const spyWithMatcher = this.with(fullMatcher);
    verifyOnlyOneCall({ spy: spyWithMatcher, errPrefix: "getHost" });
    return spyWithMatcher.firstCall.args[0].host;
  },
  getRequestBody(this: UnmockServiceSpy, matcher?: SinonMatcher): any {
    const methodMatcher = match({ method: "get" });
    const fullMatcher = matcher ? methodMatcher.and(matcher) : methodMatcher;
    const spyWithMatcher = this.with(fullMatcher);
    verifyOnlyOneCall({ spy: spyWithMatcher, errPrefix: "getRequestBody" });
    return spyWithMatcher.firstCall.args[0].body;
  },
  putHost(this: UnmockServiceSpy, matcher?: SinonMatcher): string {
    const methodMatcher = match({ method: "put" });
    const fullMatcher = matcher ? methodMatcher.and(matcher) : methodMatcher;
    const spyWithMatcher = this.with(fullMatcher);
    verifyOnlyOneCall({ spy: spyWithMatcher, errPrefix: "putHost" });
    return spyWithMatcher.firstCall.args[0].host;
  },
  putRequestBody(this: UnmockServiceSpy, matcher?: SinonMatcher): any {
    const methodMatcher = match({ method: "put" });
    const fullMatcher = matcher ? methodMatcher.and(matcher) : methodMatcher;
    const spyWithMatcher = this.with(fullMatcher);
    verifyOnlyOneCall({ spy: spyWithMatcher, errPrefix: "putRequestBody" });
    return spyWithMatcher.firstCall.args[0].body;
  },
  deleteHost(this: UnmockServiceSpy, matcher?: SinonMatcher): string {
    const methodMatcher = match({ method: "delete" });
    const fullMatcher = matcher ? methodMatcher.and(matcher) : methodMatcher;
    const spyWithMatcher = this.with(fullMatcher);
    verifyOnlyOneCall({ spy: spyWithMatcher, errPrefix: "deleteHost" });
    return spyWithMatcher.firstCall.args[0].host;
  },
  deleteRequestBody(this: UnmockServiceSpy, matcher?: SinonMatcher): any {
    const methodMatcher = match({ method: "delete" });
    const fullMatcher = matcher ? methodMatcher.and(matcher) : methodMatcher;
    const spyWithMatcher = this.with(fullMatcher);
    verifyOnlyOneCall({ spy: spyWithMatcher, errPrefix: "deleteRequestBody" });
    return spyWithMatcher.firstCall.args[0].body;
  },
};
